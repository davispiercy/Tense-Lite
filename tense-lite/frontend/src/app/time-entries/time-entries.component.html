<div class="title">
  <h1>Time Entries</h1>
</div>

<div class="add-entry">
  <div *ngIf="!isChecked">
    <button (click)="showFormToggle()">Add Entry</button>
  </div>

  <div *ngIf="isChecked">
    <form [formGroup]="entryForm">
      <div *ngIf="editing">
        <h3>Edit Entry</h3>
      </div>
      <div *ngIf="!editing">
        <h3>New Entry</h3>
      </div>
      <label for="user-id">User ID: </label>
      <input id="user-id" type="number" formControlName="user_id"> <br>
      <label for="project-id">Project ID: </label>
      <input id="project-id" type="number" formControlName="project_id"> <br>
      <label for="entry-date">Entry Date: </label>
      <input id="entry-date" type="date" formControlName="entry_date"> <br>
      <label for="notes">Notes: </label>
      <input id="notes" type="text" formControlName="notes"> <br>
      <label for="hours">Hours: </label>
      <input id="hours" type="number" formControlName="hours"> <br>
      <label for="billable">Billable: </label>
      <input id="billable" type="checkbox" formControlName="billable">
    </form>
    <div *ngIf="editing">
      <button type="submit" [disabled]="!entryForm.valid" (click)="editEntry()">Submit</button>
    </div>
    <div *ngIf="!editing">
      <button type="submit" [disabled]="!entryForm.valid" (click)="onSubmit()">Submit</button>
    </div>

    <button id="cancel" (click)="showFormToggle()">Cancel</button>
  </div>
</div>

<ul *ngIf="entries$ | async as entries; else loading">
  <li *ngFor="let entry of entries">
    Entry Id: {{ entry.id }} <br>
    User Id: {{ entry.user_id }} <br>
    Project Id: {{ entry.project_id }} <br>
    Entry Date: {{ entry.entry_date }} <br>
    Notes: {{ entry.notes }} <br>
    Hours: {{ entry.hours }} <br>
    Billable: {{ entry.billable }} <br>
    <button id="delete" (click)="delete(entry.id)">Delete Entry</button>
    <button id="edit" (click)="edit(entry)">Edit Entry</button>
  </li>
</ul>
<ng-template #loading>Loading...</ng-template>
